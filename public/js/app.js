const hamburguer=document.querySelector(".hamburguer"),email={nombre:"",email:"",telefono:""},emailNewsletter={email:""},formHeader=document.querySelector("#formHeader"),inputName=document.querySelector("#name"),inputEmail=document.querySelector("#email"),inputTel=document.querySelector("#tel"),formNewsletter=document.querySelector("#formNewsletter"),inputEmailNewsletter=document.querySelector("#emailNews");function eventListeners(){hamburguer.addEventListener("click",openCloseNav),inputName.addEventListener("input",validar),inputEmail.addEventListener("input",validar),inputTel.addEventListener("input",validar),inputEmailNewsletter.addEventListener("input",validar),formHeader.addEventListener("submit",sendEmail),formNewsletter.addEventListener("submit",sendEmail)}function openCloseNav(){const e=document.querySelector(".nav");e.classList.toggle("nav--activo"),closeNavOnClick(e)}function closeNavOnClick(e){document.querySelectorAll(".nav__link").forEach((t,r)=>{t.addEventListener("click",t=>{t.preventDefault();document.querySelector(t.target.attributes.href.value).scrollIntoView({behavior:"smooth"});"A"===t.target.tagName&&e.classList.remove("nav--activo")})}),window.addEventListener("click",t=>{const r=t.target.parentElement;e.classList.contains("nav--activo")&&r!==hamburguer&&e.classList.remove("nav--activo")})}function validar(e){const t=e.target,r=t.parentElement,i=t.id,l=t.name,n=t.value.trim().toLowerCase();return""===n&&"emailNews"!==i?(showAlert(`El ${l} es obligatorio`,r),email[l]="",void checkEmail()):"email"!==i||isValidEmail(n)?"telefono"!==i||isValidTel(n)?"emailNews"!==i||isValidEmail(n)?(cleanAlert(r),fillObjects(r,l,n),checkEmail(),void checkEmailNewsletter()):(showAlert("El email es invalido",r),emailNewsletter[l]="",void checkEmailNewsletter()):(showAlert("El teléfono es inválido",r),email[l]="",void checkEmail()):(showAlert("El email es inválido",r),email[l]="",void checkEmail())}function showAlert(e,t){cleanAlert(t);const r=t.querySelector(".form__field");r.classList.add("form__field--error"),r.placeholder=e}function cleanAlert(e){const t=e.querySelector(".form__field--error");t&&(t.classList.remove("form__field--error"),t.placeholder="Ingresa tu "+t.name)}function isValidEmail(e){return/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(e)}function isValidTel(e){return/^(\+52|0052|52)?[ -]*[ -]*([0-9][ -]*){10}/.test(e)}function fillObjects(e,t,r){e.parentElement===formHeader&&(email[t]=r),e.parentElement===formNewsletter&&(emailNewsletter[t]=r)}function checkEmail(){const e=document.querySelector("#btnSubmit");Object.values(email).includes("")?e.disabled=!0:e.disabled=!1}function checkEmailNewsletter(){const e=document.querySelector("#btnSubscribe");Object.values(emailNewsletter).includes("")?e.disabled=!0:e.disabled=!1}function sendEmail(e){e.preventDefault();const t=e.target;if(t===formHeader){const e=document.querySelector("#spinner");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm(t);const r=document.createElement("P");r.classList.add("form__exito"),r.textContent="Mensaje envíado exitosamente",formHeader.appendChild(r),setTimeout(()=>{r.remove()},2e3)},3e3)}if(t===formNewsletter){const e=document.querySelector("#spinnerNews");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm(t);const r=document.createElement("P");r.classList.add("form__exito"),r.classList.add("form__exito--newsletter"),r.textContent="Gracias por suscribirte",formNewsletter.appendChild(r),setTimeout(()=>{r.remove()},2e3)},3e3)}}function resetForm(e){return e===formHeader?(email.nombre="",email.email="",email.telefono="",formHeader.reset(),void checkEmail()):e===formNewsletter?(emailNewsletter.email="",formNewsletter.reset(),void checkEmailNewsletter()):void 0}document.addEventListener("DOMContentLoaded",eventListeners);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJoYW1idXJndWVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZW1haWwiLCJub21icmUiLCJ0ZWxlZm9ubyIsImVtYWlsTmV3c2xldHRlciIsImZvcm1IZWFkZXIiLCJpbnB1dE5hbWUiLCJpbnB1dEVtYWlsIiwiaW5wdXRUZWwiLCJmb3JtTmV3c2xldHRlciIsImlucHV0RW1haWxOZXdzbGV0dGVyIiwiZXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlbkNsb3NlTmF2IiwidmFsaWRhciIsInNlbmRFbWFpbCIsIm5hdiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsb3NlTmF2T25DbGljayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWFjaExpbmsiLCJpbmRleCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImF0dHJpYnV0ZXMiLCJocmVmIiwidmFsdWUiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwidGFnTmFtZSIsInJlbW92ZSIsIndpbmRvdyIsInJlZmVyZW5jaWEiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJpbnB1dCIsInJlZmVyZW5jZSIsImZpZWxkSWQiLCJpZCIsImZpZWxkTmFtZSIsIm5hbWUiLCJmaWVsZFZhbHVlIiwidHJpbSIsInRvTG93ZXJDYXNlIiwic2hvd0FsZXJ0IiwiY2hlY2tFbWFpbCIsImlzVmFsaWRFbWFpbCIsImlzVmFsaWRUZWwiLCJjbGVhbkFsZXJ0IiwiZmlsbE9iamVjdHMiLCJjaGVja0VtYWlsTmV3c2xldHRlciIsIm1lbnNhamUiLCJlcnJvciIsImFkZCIsInBsYWNlaG9sZGVyIiwiaXNBY3RpdmVBbGVydCIsInRlc3QiLCJ0ZWwiLCJidG5TdWJtaXQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJpbmNsdWRlcyIsImRpc2FibGVkIiwiYnRuU3Vic2NyaWJlIiwic3Bpbm5lciIsInNldFRpbWVvdXQiLCJyZXNldEZvcm0iLCJhbGVydGFFeGl0byIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwic3Bpbm5lck5ld3MiLCJyZXNldCJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBTUEsV0FBYUMsU0FBU0MsY0FBYyxlQUlwQ0MsTUFBUSxDQUNaQyxPQUFRLEdBQ1JELE1BQU8sR0FDUEUsU0FBVSxJQUdOQyxnQkFBa0IsQ0FDdEJILE1BQU8sSUFHSEksV0FBYU4sU0FBU0MsY0FBYyxlQUNwQ00sVUFBWVAsU0FBU0MsY0FBYyxTQUNuQ08sV0FBYVIsU0FBU0MsY0FBYyxVQUNwQ1EsU0FBV1QsU0FBU0MsY0FBYyxRQUNsQ1MsZUFBaUJWLFNBQVNDLGNBQWMsbUJBQ3hDVSxxQkFBdUJYLFNBQVNDLGNBQWMsY0FNcEQsU0FBU1csaUJBRVBiLFdBQVdjLGlCQUFpQixRQUFTQyxjQUdyQ1AsVUFBVU0saUJBQWlCLFFBQVNFLFNBQ3BDUCxXQUFXSyxpQkFBaUIsUUFBU0UsU0FDckNOLFNBQVNJLGlCQUFpQixRQUFTRSxTQUNuQ0oscUJBQXFCRSxpQkFBaUIsUUFBU0UsU0FDL0NULFdBQVdPLGlCQUFpQixTQUFVRyxXQUN0Q04sZUFBZUcsaUJBQWlCLFNBQVVHLFdBSzVDLFNBQVNGLGVBQ1AsTUFBTUcsRUFBTWpCLFNBQVNDLGNBQWMsUUFFbkNnQixFQUFJQyxVQUFVQyxPQUFPLGVBRXJCQyxnQkFBZ0JILEdBR2xCLFNBQVNHLGdCQUFnQkgsR0FDTmpCLFNBQVNxQixpQkFBaUIsY0FFbENDLFFBQVEsQ0FBQ0MsRUFBVUMsS0FDMUJELEVBQVNWLGlCQUFpQixRQUFVWSxJQUNsQ0EsRUFBRUMsaUJBR2MxQixTQUFTQyxjQUFjd0IsRUFBRUUsT0FBT0MsV0FBV0MsS0FBS0MsT0FDeERDLGVBQWUsQ0FBRUMsU0FBVSxXQUdwQixNQUNYUCxFQUFFRSxPQUFPTSxTQUNYaEIsRUFBSUMsVUFBVWdCLE9BQU8sbUJBTTNCQyxPQUFPdEIsaUJBQWlCLFFBQVVZLElBRWhDLE1BQU1XLEVBQWFYLEVBQUVFLE9BQU9VLGNBTXhCcEIs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LEVBQWN2RSxTQUFTd0UsY0FBYyxLQUMzQ0QsRUFBWXJELFVBQVV1QyxJQUFJLGVBQzFCYyxFQUFZckQsVUFBVXVDLElBQUksMkJBQzFCYyxFQUFZRSxZQUFjLDBCQUUxQi9ELGVBQWVnRSxZQUFZSCxHQUczQkYsV0FBVyxLQUNURSxFQUFZckMsVUFDWCxNQUNGLE1BTVAsU0FBU29DLFVBQVUvQixHQUNqQixPQUFJQSxJQUFVakMsWUFFWkosTUFBTUMsT0FBUyxHQUNmRCxNQUFNQSxNQUFRLEdBQ2RBLE1BQU1FLFNBQVcsR0FHakJFLFdBQVdzRSxhQUdYM0IsY0FLRVYsSUFBVTdCLGdCQUVaTCxnQkFBZ0JILE1BQVEsR0FHeEJRLGVBQWVrRSxhQUdmdEIsNkJBUkYsRUFyUUZ0RCxTQUFTYSxpQkFBaUIsbUJBQW9CRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWYXJpYWJsZXMgTmF2XHJcbmNvbnN0IGhhbWJ1cmd1ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaGFtYnVyZ3VlcmApO1xyXG5cclxuLy8gVmFyaWFibGVzIGZvcm11bGFyaW9cclxuXHJcbmNvbnN0IGVtYWlsID0ge1xyXG4gIG5vbWJyZTogYGAsXHJcbiAgZW1haWw6IGBgLFxyXG4gIHRlbGVmb25vOiBgYCxcclxufTtcclxuXHJcbmNvbnN0IGVtYWlsTmV3c2xldHRlciA9IHtcclxuICBlbWFpbDogYGAsXHJcbn07XHJcblxyXG5jb25zdCBmb3JtSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2Zvcm1IZWFkZXJgKTtcclxuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25hbWVgKTtcclxuY29uc3QgaW5wdXRFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlbWFpbGApO1xyXG5jb25zdCBpbnB1dFRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0ZWxgKTtcclxuY29uc3QgZm9ybU5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZm9ybU5ld3NsZXR0ZXJgKTtcclxuY29uc3QgaW5wdXRFbWFpbE5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZW1haWxOZXdzYCk7XHJcblxyXG4vLyBFdmVudG9zXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBET01Db250ZW50TG9hZGVkYCwgZXZlbnRMaXN0ZW5lcnMpO1xyXG5cclxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgLy8gQWJyaXIgeSBjZXJyYXIgbmF2XHJcbiAgaGFtYnVyZ3Vlci5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIG9wZW5DbG9zZU5hdik7XHJcblxyXG4gIC8vIFZhbGlkYWNpb24gZm9ybXVsYXJpb1xyXG4gIGlucHV0TmFtZS5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWwuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCB2YWxpZGFyKTtcclxuICBpbnB1dFRlbC5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWxOZXdzbGV0dGVyLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgdmFsaWRhcik7XHJcbiAgZm9ybUhlYWRlci5hZGRFdmVudExpc3RlbmVyKGBzdWJtaXRgLCBzZW5kRW1haWwpO1xyXG4gIGZvcm1OZXdzbGV0dGVyLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIHNlbmRFbWFpbCk7XHJcbn1cclxuXHJcbi8vIEZ1bmNpb25lc1xyXG5cclxuZnVuY3Rpb24gb3BlbkNsb3NlTmF2KCkge1xyXG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcclxuXHJcbiAgbmF2LmNsYXNzTGlzdC50b2dnbGUoYG5hdi0tYWN0aXZvYCk7XHJcblxyXG4gIGNsb3NlTmF2T25DbGljayhuYXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU5hdk9uQ2xpY2sobmF2KSB7XHJcbiAgY29uc3QgbmF2TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAubmF2X19saW5rYCk7XHJcblxyXG4gIG5hdkxpbmtzLmZvckVhY2goKGVhY2hMaW5rLCBpbmRleCkgPT4ge1xyXG4gICAgZWFjaExpbmsuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAvLyBTY3JvbGwgYWwgZGFyIGNsaWNrIGVuIHVuIGVsZW1lbnRvXHJcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUudGFyZ2V0LmF0dHJpYnV0ZXMuaHJlZi52YWx1ZSk7XHJcbiAgICAgIHNlY3Rpb24uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogYHNtb290aGAgfSk7XHJcblxyXG4gICAgICAvLyBDZXJyYXIgZWwgbWVudSBzaSBzZSBsZSBkYSBjbGljayBhIHVuIGVubGFjZVxyXG4gICAgICBjb25zdCBhbmNob3IgPSBgQWA7XHJcbiAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBhbmNob3IpIHtcclxuICAgICAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZShgbmF2LS1hY3Rpdm9gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVqZWN1dGEgZWwgZXZlbnRvIGBjbGlja2AgZW4gbGEgdmVudGFuYSB3aW5kb3cgZGVsIG5hdmVnYWRvclxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIC8vIE9idGVuZXIgZWwgZWxlbWVudG8gcGFkcmUgZGVsIGVsZW1lbnRvIGVuIGVsIHF1ZSBzZSBoaXpvIGNsaWMuXHJcbiAgICBjb25zdCByZWZlcmVuY2lhID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAvKiAxLiBDb21wcm9iYXIgc2kgZWwgZWxlbWVudG8gbmF2IHRpZW5lIGxhIGNsYXNlICduYXYtLWFjdGl2bycuXHJcbiAgICAgICAyLiBDb21wcm9iYXIgc2kgZWwgZWxlbWVudG8gcGFkcmUgZGVsIGVsZW1lbnRvIGVuIGVsIHF1ZSBzZSBoaXpvIGNsaWMgbm8gZXMgaWd1YWwgYWwgZWxlbWVudG8gY29uIGxhIGNsYXNlICdoYW1idXJndWVyJy5cclxuICAgICAgIFNpIHRvZGFzIGxhcyBjb25kaWNpb25lcyBzZSBjdW1wbGVuLCBhbHRlcm5hciBsYSBwcmVzZW5jaWEgZGUgbGEgY2xhc2UgJ25hdi0tYWN0aXZvJyBlbiBlbCBlbGVtZW50byAnbmF2Jy5cclxuICAgICovXHJcbiAgICBpZiAobmF2LmNsYXNzTGlzdC5jb250YWlucyhgbmF2LS1hY3Rpdm9gKSAmJiByZWZlcmVuY2lhICE9PSBoYW1idXJndWVyKSB7XHJcbiAgICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2b2ApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFyKGUpIHtcclxuICBjb25zdCBlbXB0eSA9IGBgO1xyXG4gIGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XHJcbiAgY29uc3QgcmVmZXJlbmNlID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuICBjb25zdCBmaWVsZElkID0gaW5wdXQuaWQ7XHJcbiAgY29uc3QgZmllbGROYW1lID0gaW5wdXQubmFtZTtcclxuICBjb25zdCBmaWVsZFZhbHVlID0gaW5wdXQudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gIC8vIEFsZXJ0YSBzaSB1biBmaWVsZCBlc3TDoSB2YWNpb1xyXG4gIGlmIChmaWVsZFZhbHVlID09PSBlbXB0eSAmJiBmaWVsZElkICE9PSBgZW1haWxOZXdzYCkge1xyXG4gICAgc2hvd0FsZXJ0KGBFbCAke2ZpZWxkTmFtZX0gZXMgb2JsaWdhdG9yaW9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgZWwgZW1haWxcclxuICBpZiAoZmllbGRJZCA9PT0gYGVtYWlsYCAmJiAhaXNWYWxpZEVtYWlsKGZpZWxkVmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIGVtYWlsIGVzIGludsOhbGlkb2AsIHJlZmVyZW5jZSk7XHJcbiAgICBlbWFpbFtmaWVsZE5hbWVdID0gYGA7XHJcbiAgICBjaGVja0VtYWlsKCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBlbCB0ZWxlZm9ub1xyXG4gIGlmIChmaWVsZElkID09PSBgdGVsZWZvbm9gICYmICFpc1ZhbGlkVGVsKGZpZWxkVmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIHRlbMOpZm9ubyBlcyBpbnbDoWxpZG9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChmaWVsZElkID09PSBgZW1haWxOZXdzYCAmJiAhaXNWYWxpZEVtYWlsKGZpZWxkVmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIGVtYWlsIGVzIGludmFsaWRvYCwgcmVmZXJlbmNlKTtcclxuICAgIGVtYWlsTmV3c2xldHRlcltmaWVsZE5hbWVdID0gYGA7XHJcbiAgICBjaGVja0VtYWlsTmV3c2xldHRlcigpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNsZWFuQWxlcnQocmVmZXJlbmNlKTtcclxuXHJcbiAgLy8gTGxlbmFyIGxvcyBvYmpldG9zIGBFbWFpbGAgeSBgRW1haWxOZXdzbGV0dGVyYFxyXG4gIGZpbGxPYmplY3RzKHJlZmVyZW5jZSwgZmllbGROYW1lLCBmaWVsZFZhbHVlKTtcclxuXHJcbiAgLy8gUmV2aXNhciBsb3Mgb2JqZXRvcyBgRW1haWxgIHkgYEVtYWlsTmV3c2xldHRlcmBcclxuICBjaGVja0VtYWlsKCk7XHJcbiAgY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0FsZXJ0KG1lbnNhamUsIHJlZmVyZW5jZSkge1xyXG4gIGNsZWFuQWxlcnQocmVmZXJlbmNlKTtcclxuXHJcbiAgLy8gR2VuZXJhciBsYXMgYWxlcnRhc1xyXG4gIGNvbnN0IGVycm9yID0gcmVmZXJlbmNlLnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19maWVsZGApO1xyXG5cclxuICBlcnJvci5jbGFzc0xpc3QuYWRkKGBmb3JtX19maWVsZC0tZXJyb3JgKTtcclxuICBlcnJvci5wbGFjZWhvbGRlciA9IG1lbnNhamU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFuQWxlcnQocmVmZXJlbmNlKSB7XHJcbiAgLy8gQ29tcHJvYmFyIHNpIGV4aXN0ZSBsYSBhbGVydGFcclxuICBjb25zdCBpc0FjdGl2ZUFsZXJ0ID0gcmVmZXJlbmNlLnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19maWVsZC0tZXJyb3JgKTtcclxuXHJcbiAgaWYgKGlzQWN0aXZlQWxlcnQpIHtcclxuICAgIGlzQWN0aXZlQWxlcnQuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fZmllbGQtLWVycm9yYCk7XHJcbiAgICBpc0FjdGl2ZUFsZXJ0LnBsYWNlaG9sZGVyID0gYEluZ3Jlc2EgdHUgJHtpc0FjdGl2ZUFsZXJ0Lm5hbWV9YDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWRFbWFpbChlbWFpbCkge1xyXG4gIGNvbnN0IHJlZ2V4RW1haWwgPSAvXlxcdysoWy4tXytdP1xcdyspKkBcXHcrKFsuLV0/XFx3KykqKFxcLlxcd3syLDEwfSkrJC87XHJcbiAgY29uc3QgcmVzdWx0RW1haWwgPSByZWdleEVtYWlsLnRlc3QoZW1haWwpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0RW1haWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWRUZWwodGVsKSB7XHJcbiAgY29uc3QgcmVnZXhUZWwgPSAvXihcXCs1MnwwMDUyfDUyKT9bIC1dKlsgLV0qKFswLTldWyAtXSopezEwfS87XHJcbiAgY29uc3QgcmVzdWx0VGVsID0gcmVnZXhUZWwudGVzdCh0ZWwpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0VGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsT2JqZWN0cyhyZWZlcmVuY2UsIGZpZWxkTmFtZSwgZmllbGRWYWx1ZSkge1xyXG4gIC8vIExsZW5hciBsb3Mgb2JqZXRvcyBgRW1haWxgIHkgYEVtYWlsTmV3c2xldHRlcmBcclxuICBpZiAocmVmZXJlbmNlLnBhcmVudEVsZW1lbnQgPT09IGZvcm1IZWFkZXIpIHtcclxuICAgIGVtYWlsW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgaWYgKHJlZmVyZW5jZS5wYXJlbnRFbGVtZW50ID09PSBmb3JtTmV3c2xldHRlcikge1xyXG4gICAgZW1haWxOZXdzbGV0dGVyW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tFbWFpbCgpIHtcclxuICBjb25zdCBidG5TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYnRuU3VibWl0YCk7XHJcblxyXG4gIGlmIChPYmplY3QudmFsdWVzKGVtYWlsKS5pbmNsdWRlcyhgYCkpIHtcclxuICAgIGJ0blN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYnRuU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrRW1haWxOZXdzbGV0dGVyKCkge1xyXG4gIGNvbnN0IGJ0blN1YnNjcmliZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidG5TdWJzY3JpYmVgKTtcclxuXHJcbiAgaWYgKE9iamVjdC52YWx1ZXMoZW1haWxOZXdzbGV0dGVyKS5pbmNsdWRlcyhgYCkpIHtcclxuICAgIGJ0blN1YnNjcmliZS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBidG5TdWJzY3JpYmUuZGlzYWJsZWQgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VuZEVtYWlsKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XHJcblxyXG4gIGlmIChpbnB1dCA9PT0gZm9ybUhlYWRlcikge1xyXG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzcGlubmVyYCk7XHJcblxyXG4gICAgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIHJlc2V0Rm9ybShpbnB1dCk7XHJcblxyXG4gICAgICAvLyBDcmVhciBhbGVydGEgZGUgZXhpdG9cclxuICAgICAgY29uc3QgYWxlcnRhRXhpdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBQYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2V4aXRvYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLnRleHRDb250ZW50ID0gXCJNZW5zYWplIGVudsOtYWRvIGV4aXRvc2FtZW50ZVwiO1xyXG5cclxuICAgICAgZm9ybUhlYWRlci5hcHBlbmRDaGlsZChhbGVydGFFeGl0byk7XHJcblxyXG4gICAgICAvLyBFbGltaW5hciBsYSBhbGVydGEgZGVzcHVlcyBkZSBtb3N0cmFybGFcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWxlcnRhRXhpdG8ucmVtb3ZlKCk7XHJcbiAgICAgIH0sIDIwMDApO1xyXG4gICAgfSwgMzAwMCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlucHV0ID09PSBmb3JtTmV3c2xldHRlcikge1xyXG4gICAgY29uc3Qgc3Bpbm5lck5ld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc3Bpbm5lck5ld3NgKTtcclxuXHJcbiAgICBzcGlubmVyTmV3cy5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc3Bpbm5lck5ld3MuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lci0tYWN0aXZvYCk7XHJcbiAgICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIHJlc2V0Rm9ybShpbnB1dCk7XHJcblxyXG4gICAgICAvLyBDcmVhciBhbGVydGEgZGUgZXhpdG9cclxuICAgICAgY29uc3QgYWxlcnRhRXhpdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBQYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2V4aXRvYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2V4aXRvLS1uZXdzbGV0dGVyYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLnRleHRDb250ZW50ID0gYEdyYWNpYXMgcG9yIHN1c2NyaWJpcnRlYDtcclxuXHJcbiAgICAgIGZvcm1OZXdzbGV0dGVyLmFwcGVuZENoaWxkKGFsZXJ0YUV4aXRvKTtcclxuXHJcbiAgICAgIC8vIEVsaW1pbmFyIGxhIGFsZXJ0YSBkZXNwdWVzIGRlIG1vc3RyYXJsYVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhbGVydGFFeGl0by5yZW1vdmUoKTtcclxuICAgICAgfSwgMjAwMCk7XHJcbiAgICB9LCAzMDAwKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldEZvcm0oaW5wdXQpIHtcclxuICBpZiAoaW5wdXQgPT09IGZvcm1IZWFkZXIpIHtcclxuICAgIC8vIFJlaW5pY2lhciBvYmpldG9zXHJcbiAgICBlbWFpbC5ub21icmUgPSBgYDtcclxuICAgIGVtYWlsLmVtYWlsID0gYGA7XHJcbiAgICBlbWFpbC50ZWxlZm9ubyA9IGBgO1xyXG5cclxuICAgIC8vIFJlaW5pY2lhciBsb3MgZm9ybXVsYXJpb3NcclxuICAgIGZvcm1IZWFkZXIucmVzZXQoKTtcclxuXHJcbiAgICAvLyBSZXZpc2FyIGVsIG9iamV0b1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChpbnB1dCA9PT0gZm9ybU5ld3NsZXR0ZXIpIHtcclxuICAgIC8vIFJlaW5pY2lhciBlbCBvYmpldG9cclxuICAgIGVtYWlsTmV3c2xldHRlci5lbWFpbCA9IGBgO1xyXG5cclxuICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICBmb3JtTmV3c2xldHRlci5yZXNldCgpO1xyXG5cclxuICAgIC8vIFJldmlzYXIgZWwgb2JqZXRvIGVtYWlsbmV3c2xldHRlclxyXG4gICAgY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59Il19
