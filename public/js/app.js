const hamburguer=document.querySelector(".hamburguer"),email={nombre:"",email:"",telefono:""},emailNews={email:""},formHeader=document.querySelector("#formHeader"),inputName=document.querySelector("#name"),inputEmail=document.querySelector("#email"),inputTel=document.querySelector("#tel"),formNewsletter=document.querySelector("#formNewsletter"),inputEmailNews=document.querySelector("#emailNews");function eventListeners(){hamburguer.addEventListener("click",openCloseNav),inputName.addEventListener("input",validar),inputEmail.addEventListener("input",validar),inputTel.addEventListener("input",validar),inputEmailNews.addEventListener("input",validar),formHeader.addEventListener("submit",sendEmail),formNewsletter.addEventListener("submit",sendEmail)}function openCloseNav(){const e=document.querySelector(".nav");e.classList.toggle("nav--activo"),closeNav(e)}function closeNav(e){document.querySelectorAll(".nav__link").forEach((t,r)=>{t.addEventListener("click",t=>{t.preventDefault();document.querySelector(t.target.attributes.href.value).scrollIntoView({behavior:"smooth"});"A"===t.target.tagName&&e.classList.remove("nav--activo")})}),window.addEventListener("click",t=>{const r=t.target.parentElement;e.classList.contains("nav--activo")&&r!==hamburguer&&e.classList.remove("nav--activo")})}function validar(e){const t=e.target.parentElement;return""===e.target.value.trim()&&"emailNews"!==e.target.id?(showAlert(`El ${e.target.name} es obligatorio`,t),email[e.target.name]="",void comprobarEmail()):"email"!==e.target.name||validarEmail(e.target.value)?"telefono"!==e.target.name||validarTel(e.target.value)?"emailNews"!==e.target.id||validarEmail(e.target.value)?(cleanAlert(t),email[e.target.name]=e.target.value.trim().toLowerCase(),emailNews[e.target.name]=e.target.value.trim().toLowerCase(),comprobarEmail(),void comprobarEmailNews()):(showAlert("El email es invalido",t),emailNews[e.target.name]="",void comprobarEmailNews()):(showAlert("El teléfono es inválido",t),email[e.target.name]="",void comprobarEmail()):(showAlert("El email es inválido",t),email[e.target.name]="",void comprobarEmail())}function showAlert(e,t){cleanAlert(t);const r=t.querySelector(".form__field");r.classList.add("form__field--error"),r.placeholder=e}function cleanAlert(e){const t=e.querySelector(".form__field--error");t&&(t.classList.remove("form__field--error"),t.placeholder="Ingresa tu "+t.name)}function validarEmail(e){return/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(e)}function validarTel(e){return/^(\+52|0052|52)?[ -]*[ -]*([0-9][ -]*){10}/.test(e)}function comprobarEmail(){const e=document.querySelector("#btnSubmit");Object.values(email).includes("")?e.disabled=!0:e.disabled=!1}function comprobarEmailNews(){const e=document.querySelector("#btnSubscribe");Object.values(emailNews).includes("")?e.disabled=!0:e.disabled=!1}function sendEmail(e){if(e.preventDefault(),"formNewsletter"===e.target.id){const e=document.querySelector("#spinnerNews");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.textContent="Gracias por suscribirte",formNewsletter.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}if("formHeader"===e.target.id){const e=document.querySelector("#spinner");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.textContent="Mensaje envíado exitosamente",formHeader.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}}function resetForm(){email.nombre="",email.email="",email.telefono="",emailNews.email="",formHeader.reset(),formNewsletter.reset(),comprobarEmail(),comprobarEmailNews()}document.addEventListener("DOMContentLoaded",eventListeners);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJoYW1idXJndWVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZW1haWwiLCJub21icmUiLCJ0ZWxlZm9ubyIsImVtYWlsTmV3cyIsImZvcm1IZWFkZXIiLCJpbnB1dE5hbWUiLCJpbnB1dEVtYWlsIiwiaW5wdXRUZWwiLCJmb3JtTmV3c2xldHRlciIsImlucHV0RW1haWxOZXdzIiwiZXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlbkNsb3NlTmF2IiwidmFsaWRhciIsInNlbmRFbWFpbCIsIm5hdiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsb3NlTmF2IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlYWNoTGluayIsImluZGV4IiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiYXR0cmlidXRlcyIsImhyZWYiLCJ2YWx1ZSIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJ0YWdOYW1lIiwicmVtb3ZlIiwid2luZG93IiwicmVmZXJlbmNpYSIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyIsInRyaW0iLCJpZCIsInNob3dBbGVydCIsIm5hbWUiLCJjb21wcm9iYXJFbWFpbCIsInZhbGlkYXJFbWFpbCIsInZhbGlkYXJUZWwiLCJjbGVhbkFsZXJ0IiwidG9Mb3dlckNhc2UiLCJjb21wcm9iYXJFbWFpbE5ld3MiLCJtZW5zYWplIiwiZXJyb3IiLCJhZGQiLCJwbGFjZWhvbGRlciIsImFsZXJ0YSIsInRlc3QiLCJ0ZWwiLCJidG5TdWJtaXQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJpbmNsdWRlcyIsImRpc2FibGVkIiwiYnRuU3Vic2NyaWJlIiwic3Bpbm5lck5ld3MiLCJzZXRUaW1lb3V0IiwicmVzZXRGb3JtIiwiYWxlcnRhRXhpdG8iLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInNwaW5uZXIiLCJyZXNldCJdLCJtYXBwaW5ncyI6IkFB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QUFZRSxZQUFjLCtCQUUxQjdELFdBQVc4RCxZQUFZSCxHQUd2QkYsV0FBVyxLQUNURSxFQUFZL0IsVUFDWCxNQUNGLE1BTVAsU0FBUzhCLFlBRVA5RCxNQUFNQyxPQUFTLEdBQ2ZELE1BQU1BLE1BQVEsR0FDZEEsTUFBTUUsU0FBVyxHQUVqQkMsVUFBVUgsTUFBUSxHQUVsQkksV0FBV2dFLFFBQ1g1RCxlQUFlNEQsUUFFZjNCLGlCQUNBSyxxQkFsUEZoRCxTQUFTYSxpQkFBaUIsbUJBQW9CRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWYXJpYWJsZXMgTmF2XHJcbmNvbnN0IGhhbWJ1cmd1ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaGFtYnVyZ3VlcmApO1xyXG5cclxuLy8gVmFyaWFibGVzIGZvcm11bGFyaW9cclxuXHJcbmNvbnN0IGVtYWlsID0ge1xyXG4gIG5vbWJyZTogYGAsXHJcbiAgZW1haWw6IGBgLFxyXG4gIHRlbGVmb25vOiBgYCxcclxufTtcclxuXHJcbmNvbnN0IGVtYWlsTmV3cyA9IHtcclxuICBlbWFpbDogYGAsXHJcbn07XHJcblxyXG5jb25zdCBmb3JtSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2Zvcm1IZWFkZXJgKTtcclxuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25hbWVgKTtcclxuY29uc3QgaW5wdXRFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlbWFpbGApO1xyXG5jb25zdCBpbnB1dFRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0ZWxgKTtcclxuY29uc3QgZm9ybU5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZm9ybU5ld3NsZXR0ZXJgKTtcclxuY29uc3QgaW5wdXRFbWFpbE5ld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZW1haWxOZXdzYCk7XHJcblxyXG4vLyBFdmVudG9zXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBET01Db250ZW50TG9hZGVkYCwgZXZlbnRMaXN0ZW5lcnMpO1xyXG5cclxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgLy8gQWJyaXIgeSBjZXJyYXIgbmF2XHJcbiAgaGFtYnVyZ3Vlci5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIG9wZW5DbG9zZU5hdik7XHJcblxyXG4gIC8vIFZhbGlkYWNpb24gZm9ybXVsYXJpb1xyXG4gIGlucHV0TmFtZS5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWwuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCB2YWxpZGFyKTtcclxuICBpbnB1dFRlbC5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWxOZXdzLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgdmFsaWRhcik7XHJcbiAgZm9ybUhlYWRlci5hZGRFdmVudExpc3RlbmVyKGBzdWJtaXRgLCBzZW5kRW1haWwpO1xyXG4gIGZvcm1OZXdzbGV0dGVyLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIHNlbmRFbWFpbCk7XHJcbn1cclxuXHJcbi8vIEZ1bmNpb25lc1xyXG5cclxuZnVuY3Rpb24gb3BlbkNsb3NlTmF2KCkge1xyXG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcclxuXHJcbiAgbmF2LmNsYXNzTGlzdC50b2dnbGUoYG5hdi0tYWN0aXZvYCk7XHJcblxyXG4gIGNsb3NlTmF2KG5hdik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTmF2KG5hdikge1xyXG4gIGNvbnN0IG5hdkxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLm5hdl9fbGlua2ApO1xyXG5cclxuICBuYXZMaW5rcy5mb3JFYWNoKChlYWNoTGluaywgaW5kZXgpID0+IHtcclxuICAgIGVhY2hMaW5rLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyBTY3JvbGwgYWwgZGFyIGNsaWNrIGVuIGVubGFjZVxyXG4gICAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlLnRhcmdldC5hdHRyaWJ1dGVzLmhyZWYudmFsdWUpO1xyXG4gICAgICBzZWN0aW9uLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IGBzbW9vdGhgIH0pO1xyXG5cclxuICAgICAgLy8gQ2VycmFyIGVsIG1lbnUgYWwgZGFyIGNsaWNrIGVuIGVubGFjZVxyXG4gICAgICBjb25zdCBhbmNob3IgPSBgQWA7XHJcbiAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBhbmNob3IpIHtcclxuICAgICAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZShgbmF2LS1hY3Rpdm9gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVzY3VjaGFyIGVsIGV2ZW50byBgY2xpY2tgIGVuIGxhIHZlbnRhbmEgd2luZG93IGRlbCBuYXZlZ2Fkb3JcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAvLyBPYnRlbmVyIGVsIGVsZW1lbnRvIHBhZHJlIGRlbCBlbGVtZW50byBlbiBlbCBxdWUgc2UgaGl6byBjbGljLlxyXG4gICAgY29uc3QgcmVmZXJlbmNpYSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgLyogVmVyaWZpY2FyIHRyZXMgY29uZGljaW9uZXMgYW50ZXMgZGUgZWplY3V0YXIgZWwgY8OzZGlnbyBkZW50cm8gZGVsIGlmOlxyXG4gICAgIDEuIENvbXByb2JhciBzaSBlbCBlbGVtZW50byBuYXYgdGllbmUgbGEgY2xhc2UgJ25hdi0tYWN0aXZvJy5cclxuICAgICAyLiBDb21wcm9iYXIgc2kgZWwgZWxlbWVudG8gcGFkcmUgZGVsIGVsZW1lbnRvIGVuIGVsIHF1ZSBzZSBoaXpvIGNsaWMgbm8gZXMgaWd1YWwgYWwgZWxlbWVudG8gY29uIGxhIGNsYXNlICdoYW1idXJndWVyJy5cclxuICAgIFNpIHRvZGFzIGxhcyBjb25kaWNpb25lcyBzZSBjdW1wbGVuLCBhbHRlcm5hciBsYSBwcmVzZW5jaWEgZGUgbGEgY2xhc2UgJ25hdi0tYWN0aXZvJyBlbiBlbCBlbGVtZW50byAnbmF2Jy5cclxuICAgICovXHJcbiAgICBpZiAobmF2LmNsYXNzTGlzdC5jb250YWlucyhgbmF2LS1hY3Rpdm9gKSAmJiByZWZlcmVuY2lhICE9PSBoYW1idXJndWVyKSB7XHJcbiAgICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2b2ApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFyKGUpIHtcclxuICBjb25zdCB2YWNpbyA9IGBgO1xyXG4gIGNvbnN0IHJlZmVyZW5jaWEgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICAvLyBBbGVydGEgc2kgdW4gZmllbGQgZXN0w6EgdmFjaW9cclxuICBpZiAoZS50YXJnZXQudmFsdWUudHJpbSgpID09PSB2YWNpbyAmJiBlLnRhcmdldC5pZCAhPT0gYGVtYWlsTmV3c2ApIHtcclxuICAgIHNob3dBbGVydChgRWwgJHtlLnRhcmdldC5uYW1lfSBlcyBvYmxpZ2F0b3Jpb2AsIHJlZmVyZW5jaWEpO1xyXG4gICAgZW1haWxbZS50YXJnZXQubmFtZV0gPSBgYDtcclxuICAgIGNvbXByb2JhckVtYWlsKCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBlbCBlbWFpbFxyXG4gIGlmIChlLnRhcmdldC5uYW1lID09PSBgZW1haWxgICYmICF2YWxpZGFyRW1haWwoZS50YXJnZXQudmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIGVtYWlsIGVzIGludsOhbGlkb2AsIHJlZmVyZW5jaWEpO1xyXG4gICAgZW1haWxbZS50YXJnZXQubmFtZV0gPSBgYDtcclxuICAgIGNvbXByb2JhckVtYWlsKCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBlbCB0ZWxlZm9ub1xyXG4gIGlmIChlLnRhcmdldC5uYW1lID09PSBgdGVsZWZvbm9gICYmICF2YWxpZGFyVGVsKGUudGFyZ2V0LnZhbHVlKSkge1xyXG4gICAgc2hvd0FsZXJ0KGBFbCB0ZWzDqWZvbm8gZXMgaW52w6FsaWRvYCwgcmVmZXJlbmNpYSk7XHJcbiAgICBlbWFpbFtlLnRhcmdldC5uYW1lXSA9IGBgO1xyXG4gICAgY29tcHJvYmFyRW1haWwoKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAoZS50YXJnZXQuaWQgPT09IGBlbWFpbE5ld3NgICYmICF2YWxpZGFyRW1haWwoZS50YXJnZXQudmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIGVtYWlsIGVzIGludmFsaWRvYCwgcmVmZXJlbmNpYSk7XHJcbiAgICBlbWFpbE5ld3NbZS50YXJnZXQubmFtZV0gPSBgYDtcclxuICAgIGNvbXByb2JhckVtYWlsTmV3cygpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNsZWFuQWxlcnQocmVmZXJlbmNpYSk7XHJcblxyXG4gIC8vIExsZW5hciBlbCBvYmpldG8gZW1haWxcclxuICBlbWFpbFtlLnRhcmdldC5uYW1lXSA9IGUudGFyZ2V0LnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAvLyBMbGVuYXIgZWwgZW1haWwgbmV3c1xyXG4gIGVtYWlsTmV3c1tlLnRhcmdldC5uYW1lXSA9IGUudGFyZ2V0LnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAvLyBSZXZpc2FyIGVsIG9iamV0byBlbWFpbFxyXG4gIGNvbXByb2JhckVtYWlsKCk7XHJcbiAgY29tcHJvYmFyRW1haWxOZXdzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dBbGVydChtZW5zYWplLCByZWZlcmVuY2lhKSB7XHJcbiAgY2xlYW5BbGVydChyZWZlcmVuY2lhKTtcclxuXHJcbiAgLy8gR2VuZXJhciBsYXMgYWxlcnRhc1xyXG4gIGNvbnN0IGVycm9yID0gcmVmZXJlbmNpYS5xdWVyeVNlbGVjdG9yKGAuZm9ybV9fZmllbGRgKTtcclxuXHJcbiAgZXJyb3IuY2xhc3NMaXN0LmFkZChgZm9ybV9fZmllbGQtLWVycm9yYCk7XHJcbiAgZXJyb3IucGxhY2Vob2xkZXIgPSBtZW5zYWplO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhbkFsZXJ0KHJlZmVyZW5jaWEpIHtcclxuICAvLyBDb21wcm9iYXIgc2kgZXhpc3RlIGxhIGFsZXJ0YVxyXG4gIGNvbnN0IGFsZXJ0YSA9IHJlZmVyZW5jaWEucXVlcnlTZWxlY3RvcihgLmZvcm1fX2ZpZWxkLS1lcnJvcmApO1xyXG5cclxuICBpZiAoYWxlcnRhKSB7XHJcbiAgICBhbGVydGEuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fZmllbGQtLWVycm9yYCk7XHJcbiAgICBhbGVydGEucGxhY2Vob2xkZXIgPSBgSW5ncmVzYSB0dSAke2FsZXJ0YS5uYW1lfWA7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFyRW1haWwoZW1haWwpIHtcclxuICBjb25zdCByZWdleEVtYWlsID0gL15cXHcrKFsuLV8rXT9cXHcrKSpAXFx3KyhbLi1dP1xcdyspKihcXC5cXHd7MiwxMH0pKyQvO1xyXG4gIGNvbnN0IHJlc3VsdGFkb0VtYWlsID0gcmVnZXhFbWFpbC50ZXN0KGVtYWlsKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdGFkb0VtYWlsO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFyVGVsKHRlbCkge1xyXG4gIGNvbnN0IHJlZ2V4VGVsID0gL14oXFwrNTJ8MDA1Mnw1Mik/WyAtXSpbIC1dKihbMC05XVsgLV0qKXsxMH0vO1xyXG4gIGNvbnN0IHJlc3VsdGFkb1RlbCA9IHJlZ2V4VGVsLnRlc3QodGVsKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdGFkb1RlbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcHJvYmFyRW1haWwoKSB7XHJcbiAgY29uc3QgYnRuU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J0blN1Ym1pdGApO1xyXG5cclxuICBpZiAoT2JqZWN0LnZhbHVlcyhlbWFpbCkuaW5jbHVkZXMoYGApKSB7XHJcbiAgICBidG5TdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGJ0blN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wcm9iYXJFbWFpbE5ld3MoKSB7XHJcbiAgY29uc3QgYnRuU3Vic2NyaWJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J0blN1YnNjcmliZWApO1xyXG5cclxuICBpZiAoT2JqZWN0LnZhbHVlcyhlbWFpbE5ld3MpLmluY2x1ZGVzKGBgKSkge1xyXG4gICAgYnRuU3Vic2NyaWJlLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGJ0blN1YnNjcmliZS5kaXNhYmxlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZW5kRW1haWwoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgaWYgKGUudGFyZ2V0LmlkID09PSBgZm9ybU5ld3NsZXR0ZXJgKSB7XHJcbiAgICBjb25zdCBzcGlubmVyTmV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzcGlubmVyTmV3c2ApO1xyXG5cclxuICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgc3Bpbm5lck5ld3MuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzcGlubmVyTmV3cy5jbGFzc0xpc3QucmVtb3ZlKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgICAgc3Bpbm5lck5ld3MuY2xhc3NMaXN0LmFkZChgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgICAgLy8gUmVpbmljaWFyIGVsIGZvcm11bGFyaW9cclxuICAgICAgcmVzZXRGb3JtKCk7XHJcblxyXG4gICAgICAvLyBDcmVhciBhbGVydGEgZGUgZXhpdG9cclxuICAgICAgY29uc3QgYWxlcnRhRXhpdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBQYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2V4aXRvYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLnRleHRDb250ZW50ID0gYEdyYWNpYXMgcG9yIHN1c2NyaWJpcnRlYDtcclxuXHJcbiAgICAgIGZvcm1OZXdzbGV0dGVyLmFwcGVuZENoaWxkKGFsZXJ0YUV4aXRvKTtcclxuXHJcbiAgICAgIC8vIEVsaW1pbmFyIGxhIGFsZXJ0YSBkZXNwdWVzIGRlIG1vc3RyYXJsYVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhbGVydGFFeGl0by5yZW1vdmUoKTtcclxuICAgICAgfSwgMjAwMCk7XHJcbiAgICB9LCAzMDAwKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAoZS50YXJnZXQuaWQgPT09IGBmb3JtSGVhZGVyYCkge1xyXG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzcGlubmVyYCk7XHJcblxyXG4gICAgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIHJlc2V0Rm9ybSgpO1xyXG5cclxuICAgICAgLy8gQ3JlYXIgYWxlcnRhIGRlIGV4aXRvXHJcbiAgICAgIGNvbnN0IGFsZXJ0YUV4aXRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgUGApO1xyXG4gICAgICBhbGVydGFFeGl0by5jbGFzc0xpc3QuYWRkKGBmb3JtX19leGl0b2ApO1xyXG4gICAgICBhbGVydGFFeGl0by50ZXh0Q29udGVudCA9IFwiTWVuc2FqZSBlbnbDrWFkbyBleGl0b3NhbWVudGVcIjtcclxuXHJcbiAgICAgIGZvcm1IZWFkZXIuYXBwZW5kQ2hpbGQoYWxlcnRhRXhpdG8pO1xyXG5cclxuICAgICAgLy8gRWxpbWluYXIgbGEgYWxlcnRhIGRlc3B1ZXMgZGUgbW9zdHJhcmxhXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0YUV4aXRvLnJlbW92ZSgpO1xyXG4gICAgICB9LCAyMDAwKTtcclxuICAgIH0sIDMwMDApO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAvLyBSZWluaWNpYXIgZWwgb2JqZXRvXHJcbiAgZW1haWwubm9tYnJlID0gYGA7XHJcbiAgZW1haWwuZW1haWwgPSBgYDtcclxuICBlbWFpbC50ZWxlZm9ubyA9IGBgO1xyXG5cclxuICBlbWFpbE5ld3MuZW1haWwgPSBgYDtcclxuXHJcbiAgZm9ybUhlYWRlci5yZXNldCgpO1xyXG4gIGZvcm1OZXdzbGV0dGVyLnJlc2V0KCk7XHJcblxyXG4gIGNvbXByb2JhckVtYWlsKCk7XHJcbiAgY29tcHJvYmFyRW1haWxOZXdzKCk7XHJcbn1cclxuIl19
