const hamburguer=document.querySelector(".hamburguer"),email={nombre:"",email:"",telefono:""},emailNewsletter={emailNews:""},formHeader=document.querySelector("#formHeader"),inputName=document.querySelector("#name"),inputEmail=document.querySelector("#email"),inputTel=document.querySelector("#tel"),formNewsletter=document.querySelector("#formNewsletter"),inputEmailNewsletter=document.querySelector("#emailNews");function eventListeners(){hamburguer.addEventListener("click",openCloseNav),inputName.addEventListener("input",validar),inputEmail.addEventListener("input",validar),inputTel.addEventListener("input",validar),inputEmailNewsletter.addEventListener("input",validar),formHeader.addEventListener("submit",sendEmail),formNewsletter.addEventListener("submit",sendEmail)}function openCloseNav(){const e=document.querySelector(".nav");e.classList.toggle("nav--activo"),closeNavOnClick(e)}function closeNavOnClick(e){document.querySelectorAll(".nav__link").forEach((t,r)=>{t.addEventListener("click",t=>{t.preventDefault();document.querySelector(t.target.attributes.href.value).scrollIntoView({behavior:"smooth"});"A"===t.target.tagName&&e.classList.remove("nav--activo")})}),window.addEventListener("click",t=>{const r=t.target.parentElement;e.classList.contains("nav--activo")&&r!==hamburguer&&e.classList.remove("nav--activo")})}function validar(e){const t=e.target,r=t.parentElement,i=(t.id,t.name),l=t.value.trim().toLowerCase();return""===l&&"emailNews"!==i?(showAlert(`El ${i} es obligatorio`,r),email[i]="",void checkEmail()):"email"!==i||isValidEmail(l)?"telefono"!==i||isValidTel(l)?"emailNews"!==i||isValidEmail(l)?(cleanAlert(r),fillObjects(r,i,l),checkEmail(),void checkEmailNewsletter()):(showAlert("El email es invalido",r),emailNewsletter[i]="",void checkEmailNewsletter()):(showAlert("El teléfono es inválido",r),email[i]="",void checkEmail()):(showAlert("El email es inválido",r),email[i]="",void checkEmail())}function showAlert(e,t){cleanAlert(t);const r=t.querySelector(".form__field");r.classList.add("form__field--error"),r.placeholder=e}function cleanAlert(e){const t=e.querySelector(".form__field--error");t&&(t.classList.remove("form__field--error"),t.placeholder="Ingresa tu "+t.name)}function isValidEmail(e){return/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(e)}function isValidTel(e){return/^(\+52|0052|52)?[ -]*[ -]*([0-9][ -]*){10}/.test(e)}function fillObjects(e,t,r){e.parentElement===formHeader&&(email[t]=r),e.parentElement===formNewsletter&&(emailNewsletter[t]=r)}function checkEmail(){const e=document.querySelector("#btnSubmit");Object.values(email).includes("")?e.disabled=!0:e.disabled=!1}function checkEmailNewsletter(){const e=document.querySelector("#btnSubscribe");Object.values(emailNewsletter).includes("")?e.disabled=!0:e.disabled=!1}function sendEmail(e){e.preventDefault();const t=e.target;if(t===formHeader){const e=document.querySelector("#spinner");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.textContent="Mensaje envíado exitosamente",formHeader.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}if(t===formNewsletter){const e=document.querySelector("#spinnerNews");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.classList.add("form__exito--newsletter"),t.textContent="Gracias por suscribirte",formNewsletter.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}}function resetForm(){email.nombre="",email.email="",email.telefono="",emailNewsletter.emailNews="",formHeader.reset(),formNewsletter.reset(),checkEmail(),checkEmailNewsletter()}document.addEventListener("DOMContentLoaded",eventListeners);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJoYW1idXJndWVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZW1haWwiLCJub21icmUiLCJ0ZWxlZm9ubyIsImVtYWlsTmV3c2xldHRlciIsImVtYWlsTmV3cyIsImZvcm1IZWFkZXIiLCJpbnB1dE5hbWUiLCJpbnB1dEVtYWlsIiwiaW5wdXRUZWwiLCJmb3JtTmV3c2xldHRlciIsImlucHV0RW1haWxOZXdzbGV0dGVyIiwiZXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlbkNsb3NlTmF2IiwidmFsaWRhciIsInNlbmRFbWFpbCIsIm5hdiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsb3NlTmF2T25DbGljayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWFjaExpbmsiLCJpbmRleCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImF0dHJpYnV0ZXMiLCJocmVmIiwidmFsdWUiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwidGFnTmFtZSIsInJlbW92ZSIsIndpbmRvdyIsInJlZmVyZW5jaWEiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJpbnB1dCIsInJlZmVyZW5jZSIsImZpZWxkTmFtZSIsImlkIiwibmFtZSIsImZpZWxkVmFsdWUiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJzaG93QWxlcnQiLCJjaGVja0VtYWlsIiwiaXNWYWxpZEVtYWlsIiwiaXNWYWxpZFRlbCIsImNsZWFuQWxlcnQiLCJmaWxsT2JqZWN0cyIsImNoZWNrRW1haWxOZXdzbGV0dGVyIiwibWVuc2FqZSIsImVycm9yIiwiYWRkIiwicGxhY2Vob2xkZXIiLCJpc0FjdGl2ZUFsZXJ0IiwidGVzdCIsInRlbCIsImJ0blN1Ym1pdCIsIk9iamVjdCIsInZhbHVlcyIsImluY2x1ZGVzIiwiZGlzYWJsZWQiLCJidG5TdWJzY3JpYmUiLCJzcGlubmVyIiwic2V0VGltZW91dCIsInJlc2V0Rm9ybSIsImFsZXJ0YUV4aXRvIiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJzcGlubmVyTmV3cyIsInJlc2V0Il0sIm1hcHBpbmdzIjoiQUFDQSxNQUFNQSxXQUFhQyxTQUFTQyxjQUFjLGVBSXBDQyxNQUFRLENBQ1pDLE9BQVEsR0FDUkQsTUFBTyxHQUNQRSxTQUFVLElBR05DLGdCQUFrQixDQUN0QkMsVUFBVyxJQUdQQyxXQUFhUCxTQUFTQyxjQUFjLGVBQ3BDTyxVQUFZUixTQUFTQyxjQUFjLFNBQ25DUSxXQUFhVCxTQUFTQyxjQUFjLFVBQ3BDUyxTQUFXVixTQUFTQyxjQUFjLFFBQ2xDVSxlQUFpQlgsU0FBU0MsY0FBYyxtQkFDeENXLHFCQUF1QlosU0FBU0MsY0FBYyxjQU1wRCxTQUFTWSxpQkFFUGQsV0FBV2UsaUJBQWlCLFFBQVNDLGNBR3JDUCxVQUFVTSxpQkFBaUIsUUFBU0UsU0FDcENQLFdBQVdLLGlCQUFpQixRQUFTRSxTQUNyQ04sU0FBU0ksaUJBQWlCLFFBQVNFLFNBQ25DSixxQkFBcUJFLGlCQUFpQixRQUFTRSxTQUMvQ1QsV0FBV08saUJBQWlCLFNBQVVHLFdBQ3RDTixlQUFlRyxpQkFBaUIsU0FBVUcsV0FLNUMsU0FBU0YsZUFDUCxNQUFNRyxFQUFNbEIsU0FBU0MsY0FBYyxRQUVuQ2lCLEVBQUlDLFVBQVVDLE9BQU8sZUFFckJDLGdCQUFnQkgsR0FHbEIsU0FBU0csZ0JBQWdCSCxHQUNObEIsU0FBU3NCLGlCQUFpQixjQUVsQ0MsUUFBUSxDQUFDQyxFQUFVQyxLQUMxQkQsRUFBU1YsaUJBQWlCLFFBQVVZLElBQ2xDQSxFQUFFQyxpQkFHYzNCLFNBQVNDLGNBQWN5QixFQUFFRSxPQUFPQyxXQUFXQyxLQUFLQyxPQUN4REMsZUFBZSxDQUFFQyxTQUFVLFdBR3BCLE1BQ1hQLEVBQUVFLE9BQU9NLFNBQ1hoQixFQUFJQyxVQUFVZ0IsT0FBTyxtQkFNM0JDLE9BQU90QixpQkFBaUIsUUFBVVksSUFFaEMsTUFBTVcsRUFBYVgsRUFBRUUsT0FBT1UsY0FNeEJw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M0NELEVBQVlwRCxVQUFVc0MsSUFBSSxlQUMxQmMsRUFBWXBELFVBQVVzQyxJQUFJLDJCQUMxQmMsRUFBWUUsWUFBYywwQkFFMUI5RCxlQUFlK0QsWUFBWUgsR0FHM0JGLFdBQVcsS0FDVEUsRUFBWXBDLFVBQ1gsTUFDRixNQU1QLFNBQVNtQyxZQUVQcEUsTUFBTUMsT0FBUyxHQUNmRCxNQUFNQSxNQUFRLEdBQ2RBLE1BQU1FLFNBQVcsR0FFakJDLGdCQUFnQkMsVUFBWSxHQUc1QkMsV0FBV3FFLFFBQ1hqRSxlQUFlaUUsUUFHZjNCLGFBQ0FLLHVCQXBRRnRELFNBQVNjLGlCQUFpQixtQkFBb0JEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFZhcmlhYmxlcyBOYXZcclxuY29uc3QgaGFtYnVyZ3VlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5oYW1idXJndWVyYCk7XHJcblxyXG4vLyBWYXJpYWJsZXMgZm9ybXVsYXJpb1xyXG5cclxuY29uc3QgZW1haWwgPSB7XHJcbiAgbm9tYnJlOiBgYCxcclxuICBlbWFpbDogYGAsXHJcbiAgdGVsZWZvbm86IGBgLFxyXG59O1xyXG5cclxuY29uc3QgZW1haWxOZXdzbGV0dGVyID0ge1xyXG4gIGVtYWlsTmV3czogYGAsXHJcbn07XHJcblxyXG5jb25zdCBmb3JtSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2Zvcm1IZWFkZXJgKTtcclxuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25hbWVgKTtcclxuY29uc3QgaW5wdXRFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlbWFpbGApO1xyXG5jb25zdCBpbnB1dFRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0ZWxgKTtcclxuY29uc3QgZm9ybU5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZm9ybU5ld3NsZXR0ZXJgKTtcclxuY29uc3QgaW5wdXRFbWFpbE5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZW1haWxOZXdzYCk7XHJcblxyXG4vLyBFdmVudG9zXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGBET01Db250ZW50TG9hZGVkYCwgZXZlbnRMaXN0ZW5lcnMpO1xyXG5cclxuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgLy8gQWJyaXIgeSBjZXJyYXIgbmF2XHJcbiAgaGFtYnVyZ3Vlci5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIG9wZW5DbG9zZU5hdik7XHJcblxyXG4gIC8vIFZhbGlkYWNpb24gZm9ybXVsYXJpb1xyXG4gIGlucHV0TmFtZS5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWwuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCB2YWxpZGFyKTtcclxuICBpbnB1dFRlbC5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0RW1haWxOZXdzbGV0dGVyLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgdmFsaWRhcik7XHJcbiAgZm9ybUhlYWRlci5hZGRFdmVudExpc3RlbmVyKGBzdWJtaXRgLCBzZW5kRW1haWwpO1xyXG4gIGZvcm1OZXdzbGV0dGVyLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIHNlbmRFbWFpbCk7XHJcbn1cclxuXHJcbi8vIEZ1bmNpb25lc1xyXG5cclxuZnVuY3Rpb24gb3BlbkNsb3NlTmF2KCkge1xyXG4gIGNvbnN0IG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5uYXZgKTtcclxuXHJcbiAgbmF2LmNsYXNzTGlzdC50b2dnbGUoYG5hdi0tYWN0aXZvYCk7XHJcblxyXG4gIGNsb3NlTmF2T25DbGljayhuYXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU5hdk9uQ2xpY2sobmF2KSB7XHJcbiAgY29uc3QgbmF2TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAubmF2X19saW5rYCk7XHJcblxyXG4gIG5hdkxpbmtzLmZvckVhY2goKGVhY2hMaW5rLCBpbmRleCkgPT4ge1xyXG4gICAgZWFjaExpbmsuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAvLyBTY3JvbGwgYWwgZGFyIGNsaWNrIGVuIHVuIGVsZW1lbnRvXHJcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUudGFyZ2V0LmF0dHJpYnV0ZXMuaHJlZi52YWx1ZSk7XHJcbiAgICAgIHNlY3Rpb24uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogYHNtb290aGAgfSk7XHJcblxyXG4gICAgICAvLyBDZXJyYXIgZWwgbWVudSBzaSBzZSBsZSBkYSBjbGljayBhIHVuIGVubGFjZVxyXG4gICAgICBjb25zdCBhbmNob3IgPSBgQWA7XHJcbiAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lID09PSBhbmNob3IpIHtcclxuICAgICAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZShgbmF2LS1hY3Rpdm9gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVqZWN1dGEgZWwgZXZlbnRvIGBjbGlja2AgZW4gbGEgdmVudGFuYSB3aW5kb3cgZGVsIG5hdmVnYWRvclxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIC8vIE9idGVuZXIgZWwgZWxlbWVudG8gcGFkcmUgZGVsIGVsZW1lbnRvIGVuIGVsIHF1ZSBzZSBoaXpvIGNsaWMuXHJcbiAgICBjb25zdCByZWZlcmVuY2lhID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAvKiAxLiBDb21wcm9iYXIgc2kgZWwgZWxlbWVudG8gbmF2IHRpZW5lIGxhIGNsYXNlICduYXYtLWFjdGl2bycuXHJcbiAgICAgICAyLiBDb21wcm9iYXIgc2kgZWwgZWxlbWVudG8gcGFkcmUgZGVsIGVsZW1lbnRvIGVuIGVsIHF1ZSBzZSBoaXpvIGNsaWMgbm8gZXMgaWd1YWwgYWwgZWxlbWVudG8gY29uIGxhIGNsYXNlICdoYW1idXJndWVyJy5cclxuICAgICAgIFNpIHRvZGFzIGxhcyBjb25kaWNpb25lcyBzZSBjdW1wbGVuLCBhbHRlcm5hciBsYSBwcmVzZW5jaWEgZGUgbGEgY2xhc2UgJ25hdi0tYWN0aXZvJyBlbiBlbCBlbGVtZW50byAnbmF2Jy5cclxuICAgICovXHJcbiAgICBpZiAobmF2LmNsYXNzTGlzdC5jb250YWlucyhgbmF2LS1hY3Rpdm9gKSAmJiByZWZlcmVuY2lhICE9PSBoYW1idXJndWVyKSB7XHJcbiAgICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2b2ApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGFyKGUpIHtcclxuICBjb25zdCBlbXB0eSA9IGBgO1xyXG4gIGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XHJcbiAgY29uc3QgcmVmZXJlbmNlID0gaW5wdXQucGFyZW50RWxlbWVudDtcclxuICBjb25zdCBmaWVsZElkID0gaW5wdXQuaWQ7XHJcbiAgY29uc3QgZmllbGROYW1lID0gaW5wdXQubmFtZTtcclxuICBjb25zdCBmaWVsZFZhbHVlID0gaW5wdXQudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gIC8vIEFsZXJ0YSBzaSB1biBmaWVsZCBlc3TDoSB2YWNpb1xyXG4gIGlmIChmaWVsZFZhbHVlID09PSBlbXB0eSAmJiBmaWVsZE5hbWUgIT09IGBlbWFpbE5ld3NgKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsICR7ZmllbGROYW1lfSBlcyBvYmxpZ2F0b3Jpb2AsIHJlZmVyZW5jZSk7XHJcbiAgICBlbWFpbFtmaWVsZE5hbWVdID0gYGA7XHJcbiAgICBjaGVja0VtYWlsKCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBlbCBlbWFpbFxyXG4gIGlmIChmaWVsZE5hbWUgPT09IGBlbWFpbGAgJiYgIWlzVmFsaWRFbWFpbChmaWVsZFZhbHVlKSkge1xyXG4gICAgc2hvd0FsZXJ0KGBFbCBlbWFpbCBlcyBpbnbDoWxpZG9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgZWwgdGVsZWZvbm9cclxuICBpZiAoZmllbGROYW1lID09PSBgdGVsZWZvbm9gICYmICFpc1ZhbGlkVGVsKGZpZWxkVmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIHRlbMOpZm9ubyBlcyBpbnbDoWxpZG9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChmaWVsZE5hbWUgPT09IGBlbWFpbE5ld3NgICYmICFpc1ZhbGlkRW1haWwoZmllbGRWYWx1ZSkpIHtcclxuICAgIHNob3dBbGVydChgRWwgZW1haWwgZXMgaW52YWxpZG9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxOZXdzbGV0dGVyW2ZpZWxkTmFtZV0gPSBgYDtcclxuICAgIGNoZWNrRW1haWxOZXdzbGV0dGVyKCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY2xlYW5BbGVydChyZWZlcmVuY2UpO1xyXG5cclxuICAvLyBMbGVuYXIgbG9zIG9iamV0b3MgYEVtYWlsYCB5IGBFbWFpbE5ld3NsZXR0ZXJgXHJcbiAgZmlsbE9iamVjdHMocmVmZXJlbmNlLCBmaWVsZE5hbWUsIGZpZWxkVmFsdWUpO1xyXG5cclxuICAvLyBSZXZpc2FyIGxvcyBvYmpldG9zIGBFbWFpbGAgeSBgRW1haWxOZXdzbGV0dGVyYFxyXG4gIGNoZWNrRW1haWwoKTtcclxuICBjaGVja0VtYWlsTmV3c2xldHRlcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93QWxlcnQobWVuc2FqZSwgcmVmZXJlbmNlKSB7XHJcbiAgY2xlYW5BbGVydChyZWZlcmVuY2UpO1xyXG5cclxuICAvLyBHZW5lcmFyIGxhcyBhbGVydGFzXHJcbiAgY29uc3QgZXJyb3IgPSByZWZlcmVuY2UucXVlcnlTZWxlY3RvcihgLmZvcm1fX2ZpZWxkYCk7XHJcblxyXG4gIGVycm9yLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2ZpZWxkLS1lcnJvcmApO1xyXG4gIGVycm9yLnBsYWNlaG9sZGVyID0gbWVuc2FqZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYW5BbGVydChyZWZlcmVuY2UpIHtcclxuICAvLyBDb21wcm9iYXIgc2kgZXhpc3RlIGxhIGFsZXJ0YVxyXG4gIGNvbnN0IGlzQWN0aXZlQWxlcnQgPSByZWZlcmVuY2UucXVlcnlTZWxlY3RvcihgLmZvcm1fX2ZpZWxkLS1lcnJvcmApO1xyXG5cclxuICBpZiAoaXNBY3RpdmVBbGVydCkge1xyXG4gICAgaXNBY3RpdmVBbGVydC5jbGFzc0xpc3QucmVtb3ZlKGBmb3JtX19maWVsZC0tZXJyb3JgKTtcclxuICAgIGlzQWN0aXZlQWxlcnQucGxhY2Vob2xkZXIgPSBgSW5ncmVzYSB0dSAke2lzQWN0aXZlQWxlcnQubmFtZX1gO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsKSB7XHJcbiAgY29uc3QgcmVnZXhFbWFpbCA9IC9eXFx3KyhbLi1fK10/XFx3KykqQFxcdysoWy4tXT9cXHcrKSooXFwuXFx3ezIsMTB9KSskLztcclxuICBjb25zdCByZXN1bHRFbWFpbCA9IHJlZ2V4RW1haWwudGVzdChlbWFpbCk7XHJcblxyXG4gIHJldHVybiByZXN1bHRFbWFpbDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNWYWxpZFRlbCh0ZWwpIHtcclxuICBjb25zdCByZWdleFRlbCA9IC9eKFxcKzUyfDAwNTJ8NTIpP1sgLV0qWyAtXSooWzAtOV1bIC1dKil7MTB9LztcclxuICBjb25zdCByZXN1bHRUZWwgPSByZWdleFRlbC50ZXN0KHRlbCk7XHJcblxyXG4gIHJldHVybiByZXN1bHRUZWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbGxPYmplY3RzKHJlZmVyZW5jZSwgZmllbGROYW1lLCBmaWVsZFZhbHVlKSB7XHJcblxyXG4gIC8vIExsZW5hciBsb3Mgb2JqZXRvcyBgRW1haWxgIHkgYEVtYWlsTmV3c2xldHRlcmBcclxuICBpZiAocmVmZXJlbmNlLnBhcmVudEVsZW1lbnQgPT09IGZvcm1IZWFkZXIpIHtcclxuICAgIGVtYWlsW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgaWYgKHJlZmVyZW5jZS5wYXJlbnRFbGVtZW50ID09PSBmb3JtTmV3c2xldHRlcikge1xyXG4gICAgZW1haWxOZXdzbGV0dGVyW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tFbWFpbCgpIHtcclxuICBjb25zdCBidG5TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYnRuU3VibWl0YCk7XHJcblxyXG4gIGlmIChPYmplY3QudmFsdWVzKGVtYWlsKS5pbmNsdWRlcyhgYCkpIHtcclxuICAgIGJ0blN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYnRuU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrRW1haWxOZXdzbGV0dGVyKCkge1xyXG4gIGNvbnN0IGJ0blN1YnNjcmliZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidG5TdWJzY3JpYmVgKTtcclxuXHJcbiAgaWYgKE9iamVjdC52YWx1ZXMoZW1haWxOZXdzbGV0dGVyKS5pbmNsdWRlcyhgYCkpIHtcclxuICAgIGJ0blN1YnNjcmliZS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBidG5TdWJzY3JpYmUuZGlzYWJsZWQgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2VuZEVtYWlsKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XHJcblxyXG4gIGlmIChpbnB1dCA9PT0gZm9ybUhlYWRlcikge1xyXG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNzcGlubmVyYCk7XHJcblxyXG4gICAgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIHJlc2V0Rm9ybSgpO1xyXG5cclxuICAgICAgLy8gQ3JlYXIgYWxlcnRhIGRlIGV4aXRvXHJcbiAgICAgIGNvbnN0IGFsZXJ0YUV4aXRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgUGApO1xyXG4gICAgICBhbGVydGFFeGl0by5jbGFzc0xpc3QuYWRkKGBmb3JtX19leGl0b2ApO1xyXG4gICAgICBhbGVydGFFeGl0by50ZXh0Q29udGVudCA9IFwiTWVuc2FqZSBlbnbDrWFkbyBleGl0b3NhbWVudGVcIjtcclxuXHJcbiAgICAgIGZvcm1IZWFkZXIuYXBwZW5kQ2hpbGQoYWxlcnRhRXhpdG8pO1xyXG5cclxuICAgICAgLy8gRWxpbWluYXIgbGEgYWxlcnRhIGRlc3B1ZXMgZGUgbW9zdHJhcmxhXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0YUV4aXRvLnJlbW92ZSgpO1xyXG4gICAgICB9LCAyMDAwKTtcclxuICAgIH0sIDMwMDApO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChpbnB1dCA9PT0gZm9ybU5ld3NsZXR0ZXIpIHtcclxuICAgIGNvbnN0IHNwaW5uZXJOZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3NwaW5uZXJOZXdzYCk7XHJcblxyXG4gICAgc3Bpbm5lck5ld3MuY2xhc3NMaXN0LmFkZChgZm9ybV9fc3Bpbm5lci0tYWN0aXZvYCk7XHJcbiAgICBzcGlubmVyTmV3cy5jbGFzc0xpc3QucmVtb3ZlKGBmb3JtX19zcGlubmVyYCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgICBzcGlubmVyTmV3cy5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyYCk7XHJcblxyXG4gICAgICAvLyBSZWluaWNpYXIgZWwgZm9ybXVsYXJpb1xyXG4gICAgICByZXNldEZvcm0oKTtcclxuXHJcbiAgICAgIC8vIENyZWFyIGFsZXJ0YSBkZSBleGl0b1xyXG4gICAgICBjb25zdCBhbGVydGFFeGl0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYFBgKTtcclxuICAgICAgYWxlcnRhRXhpdG8uY2xhc3NMaXN0LmFkZChgZm9ybV9fZXhpdG9gKTtcclxuICAgICAgYWxlcnRhRXhpdG8uY2xhc3NMaXN0LmFkZChgZm9ybV9fZXhpdG8tLW5ld3NsZXR0ZXJgKTtcclxuICAgICAgYWxlcnRhRXhpdG8udGV4dENvbnRlbnQgPSBgR3JhY2lhcyBwb3Igc3VzY3JpYmlydGVgO1xyXG5cclxuICAgICAgZm9ybU5ld3NsZXR0ZXIuYXBwZW5kQ2hpbGQoYWxlcnRhRXhpdG8pO1xyXG5cclxuICAgICAgLy8gRWxpbWluYXIgbGEgYWxlcnRhIGRlc3B1ZXMgZGUgbW9zdHJhcmxhXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0YUV4aXRvLnJlbW92ZSgpO1xyXG4gICAgICB9LCAyMDAwKTtcclxuICAgIH0sIDMwMDApO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAvLyBSZWluaWNpYXIgbG9zIG9iamV0b3NcclxuICBlbWFpbC5ub21icmUgPSBgYDtcclxuICBlbWFpbC5lbWFpbCA9IGBgO1xyXG4gIGVtYWlsLnRlbGVmb25vID0gYGA7XHJcblxyXG4gIGVtYWlsTmV3c2xldHRlci5lbWFpbE5ld3MgPSBgYDtcclxuXHJcbiAgLy8gUmVpbmljaWFyIGxvcyBmb3JtdWxhcmlvc1xyXG4gIGZvcm1IZWFkZXIucmVzZXQoKTtcclxuICBmb3JtTmV3c2xldHRlci5yZXNldCgpO1xyXG5cclxuICAvLyBDb21wcm9iYXIgZWwgYEVtYWlsYCBlIGBFbWFpbE5ld3NgXHJcbiAgY2hlY2tFbWFpbCgpO1xyXG4gIGNoZWNrRW1haWxOZXdzbGV0dGVyKCk7XHJcbn1cclxuIl19
