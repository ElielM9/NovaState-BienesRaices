const hamburguer=document.querySelector(".hamburguer"),email={nombre:"",email:"",telefono:""},emailNewsletter={emailNews:""},formHeader=document.querySelector("#formHeader"),inputName=document.querySelector("#name"),inputEmail=document.querySelector("#email"),inputTel=document.querySelector("#tel"),formNewsletter=document.querySelector("#formNewsletter"),inputEmailNews=document.querySelector("#emailNews");function eventListeners(){hamburguer.addEventListener("click",openCloseNav),inputName.addEventListener("input",validar),inputEmail.addEventListener("input",validar),inputTel.addEventListener("input",validar),inputEmailNews.addEventListener("input",validar),formHeader.addEventListener("submit",sendEmail),formNewsletter.addEventListener("submit",sendEmail)}function openCloseNav(){const e=document.querySelector(".nav");e.classList.toggle("nav--activo"),closeNavOnClick(e)}function closeNavOnClick(e){document.querySelectorAll(".nav__link").forEach((t,r)=>{t.addEventListener("click",t=>{t.preventDefault();document.querySelector(t.target.attributes.href.value).scrollIntoView({behavior:"smooth"});"A"===t.target.tagName&&e.classList.remove("nav--activo")})}),window.addEventListener("click",t=>{const r=t.target.parentElement;e.classList.contains("nav--activo")&&r!==hamburguer&&e.classList.remove("nav--activo")})}function validar(e){const t=e.target,r=t.parentElement,i=t.name,l=t.value.trim().toLowerCase();return""===l&&"emailNews"!==i?(showAlert(`El ${i} es obligatorio`,r),email[i]="",void checkEmail()):"email"!==i||isValidEmail(l)?"telefono"!==i||isValidTel(l)?"emailNews"!==i||isValidEmail(l)?(cleanAlert(r),r.parentElement===formHeader&&(email[i]=l),r.parentElement===formNewsletter&&(emailNewsletter[i]=l),checkEmail(),void checkEmailNewsletter()):(showAlert("El email es invalido",r),delete email.emailNews,emailNewsletter[i]="",void checkEmailNewsletter()):(showAlert("El teléfono es inválido",r),email[i]="",void checkEmail()):(showAlert("El email es inválido",r),email[i]="",void checkEmail())}function showAlert(e,t){cleanAlert(t);const r=t.querySelector(".form__field");r.classList.add("form__field--error"),r.placeholder=e}function cleanAlert(e){const t=e.querySelector(".form__field--error");t&&(t.classList.remove("form__field--error"),t.placeholder="Ingresa tu "+t.name)}function isValidEmail(e){return/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(e)}function isValidTel(e){return/^(\+52|0052|52)?[ -]*[ -]*([0-9][ -]*){10}/.test(e)}function checkEmail(){const e=document.querySelector("#btnSubmit");Object.values(email).includes("")?e.disabled=!0:e.disabled=!1}function checkEmailNewsletter(){const e=document.querySelector("#btnSubscribe");Object.values(emailNewsletter).includes("")?e.disabled=!0:e.disabled=!1}function sendEmail(e){e.preventDefault();const t=e.target;if(t===formHeader){const e=document.querySelector("#spinner");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.textContent="Mensaje envíado exitosamente",formHeader.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}if(t===formNewsletter){const e=document.querySelector("#spinnerNews");return e.classList.add("form__spinner--activo"),e.classList.remove("form__spinner"),void setTimeout(()=>{e.classList.remove("form__spinner--activo"),e.classList.add("form__spinner"),resetForm();const t=document.createElement("P");t.classList.add("form__exito"),t.classList.add("form__exito--newsletter"),t.textContent="Gracias por suscribirte",formNewsletter.appendChild(t),setTimeout(()=>{t.remove()},2e3)},3e3)}}function resetForm(){email.nombre="",email.email="",email.telefono="",emailNewsletter.emailNews="",formHeader.reset(),formNewsletter.reset(),checkEmail(),checkEmailNewsletter()}document.addEventListener("DOMContentLoaded",eventListeners);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJoYW1idXJndWVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZW1haWwiLCJub21icmUiLCJ0ZWxlZm9ubyIsImVtYWlsTmV3c2xldHRlciIsImVtYWlsTmV3cyIsImZvcm1IZWFkZXIiLCJpbnB1dE5hbWUiLCJpbnB1dEVtYWlsIiwiaW5wdXRUZWwiLCJmb3JtTmV3c2xldHRlciIsImlucHV0RW1haWxOZXdzIiwiZXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlbkNsb3NlTmF2IiwidmFsaWRhciIsInNlbmRFbWFpbCIsIm5hdiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsb3NlTmF2T25DbGljayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWFjaExpbmsiLCJpbmRleCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImF0dHJpYnV0ZXMiLCJocmVmIiwidmFsdWUiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwidGFnTmFtZSIsInJlbW92ZSIsIndpbmRvdyIsInJlZmVyZW5jaWEiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJpbnB1dCIsInJlZmVyZW5jZSIsImZpZWxkTmFtZSIsIm5hbWUiLCJmaWVsZFZhbHVlIiwidHJpbSIsInRvTG93ZXJDYXNlIiwic2hvd0FsZXJ0IiwiY2hlY2tFbWFpbCIsImlzVmFsaWRFbWFpbCIsImlzVmFsaWRUZWwiLCJjbGVhbkFsZXJ0IiwiY2hlY2tFbWFpbE5ld3NsZXR0ZXIiLCJtZW5zYWplIiwiZXJyb3IiLCJhZGQiLCJwbGFjZWhvbGRlciIsImlzQWN0aXZlQWxlcnQiLCJ0ZXN0IiwidGVsIiwiYnRuU3VibWl0IiwiT2JqZWN0IiwidmFsdWVzIiwiaW5jbHVkZXMiLCJkaXNhYmxlZCIsImJ0blN1YnNjcmliZSIsInNwaW5uZXIiLCJzZXRUaW1lb3V0IiwicmVzZXRGb3JtIiwiYWxlcnRhRXhpdG8iLCJjcmVhdGVFbGVt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RCxZQUFZSCxHQUczQkYsV0FBVyxLQUNURSxFQUFZbEMsVUFDWCxNQUNGLE1BTVAsU0FBU2lDLFlBRVBsRSxNQUFNQyxPQUFTLEdBQ2ZELE1BQU1BLE1BQVEsR0FDZEEsTUFBTUUsU0FBVyxHQUVqQkMsZ0JBQWdCQyxVQUFZLEdBRzVCQyxXQUFXbUUsUUFDWC9ELGVBQWUrRCxRQUdmMUIsYUFDQUksdUJBOVBGcEQsU0FBU2MsaUJBQWlCLG1CQUFvQkQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVmFyaWFibGVzIE5hdlxyXG5jb25zdCBoYW1idXJndWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmhhbWJ1cmd1ZXJgKTtcclxuXHJcbi8vIFZhcmlhYmxlcyBmb3JtdWxhcmlvXHJcblxyXG5jb25zdCBlbWFpbCA9IHtcclxuICBub21icmU6IGBgLFxyXG4gIGVtYWlsOiBgYCxcclxuICB0ZWxlZm9ubzogYGAsXHJcbn07XHJcblxyXG5jb25zdCBlbWFpbE5ld3NsZXR0ZXIgPSB7XHJcbiAgZW1haWxOZXdzOiBgYCxcclxufTtcclxuXHJcbmNvbnN0IGZvcm1IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjZm9ybUhlYWRlcmApO1xyXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbmFtZWApO1xyXG5jb25zdCBpbnB1dEVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2VtYWlsYCk7XHJcbmNvbnN0IGlucHV0VGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3RlbGApO1xyXG5jb25zdCBmb3JtTmV3c2xldHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNmb3JtTmV3c2xldHRlcmApO1xyXG5jb25zdCBpbnB1dEVtYWlsTmV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNlbWFpbE5ld3NgKTtcclxuXHJcbi8vIEV2ZW50b3NcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYERPTUNvbnRlbnRMb2FkZWRgLCBldmVudExpc3RlbmVycyk7XHJcblxyXG5mdW5jdGlvbiBldmVudExpc3RlbmVycygpIHtcclxuICAvLyBBYnJpciB5IGNlcnJhciBuYXZcclxuICBoYW1idXJndWVyLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb3BlbkNsb3NlTmF2KTtcclxuXHJcbiAgLy8gVmFsaWRhY2lvbiBmb3JtdWxhcmlvXHJcbiAgaW5wdXROYW1lLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgdmFsaWRhcik7XHJcbiAgaW5wdXRFbWFpbC5hZGRFdmVudExpc3RlbmVyKGBpbnB1dGAsIHZhbGlkYXIpO1xyXG4gIGlucHV0VGVsLmFkZEV2ZW50TGlzdGVuZXIoYGlucHV0YCwgdmFsaWRhcik7XHJcbiAgaW5wdXRFbWFpbE5ld3MuYWRkRXZlbnRMaXN0ZW5lcihgaW5wdXRgLCB2YWxpZGFyKTtcclxuICBmb3JtSGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIHNlbmRFbWFpbCk7XHJcbiAgZm9ybU5ld3NsZXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihgc3VibWl0YCwgc2VuZEVtYWlsKTtcclxufVxyXG5cclxuLy8gRnVuY2lvbmVzXHJcblxyXG5mdW5jdGlvbiBvcGVuQ2xvc2VOYXYoKSB7XHJcbiAgY29uc3QgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm5hdmApO1xyXG5cclxuICBuYXYuY2xhc3NMaXN0LnRvZ2dsZShgbmF2LS1hY3Rpdm9gKTtcclxuXHJcbiAgY2xvc2VOYXZPbkNsaWNrKG5hdik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlTmF2T25DbGljayhuYXYpIHtcclxuICBjb25zdCBuYXZMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5uYXZfX2xpbmtgKTtcclxuXHJcbiAgbmF2TGlua3MuZm9yRWFjaCgoZWFjaExpbmssIGluZGV4KSA9PiB7XHJcbiAgICBlYWNoTGluay5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIC8vIFNjcm9sbCBhbCBkYXIgY2xpY2sgZW4gdW4gZWxlbWVudG9cclxuICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZS50YXJnZXQuYXR0cmlidXRlcy5ocmVmLnZhbHVlKTtcclxuICAgICAgc2VjdGlvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBgc21vb3RoYCB9KTtcclxuXHJcbiAgICAgIC8vIENlcnJhciBlbCBtZW51IHNpIHNlIGxlIGRhIGNsaWNrIGEgdW4gZW5sYWNlXHJcbiAgICAgIGNvbnN0IGFuY2hvciA9IGBBYDtcclxuICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09IGFuY2hvcikge1xyXG4gICAgICAgIG5hdi5jbGFzc0xpc3QucmVtb3ZlKGBuYXYtLWFjdGl2b2ApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gRWplY3V0YSBlbCBldmVudG8gYGNsaWNrYCBlbiBsYSB2ZW50YW5hIHdpbmRvdyBkZWwgbmF2ZWdhZG9yXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgLy8gT2J0ZW5lciBlbCBlbGVtZW50byBwYWRyZSBkZWwgZWxlbWVudG8gZW4gZWwgcXVlIHNlIGhpem8gY2xpYy5cclxuICAgIGNvbnN0IHJlZmVyZW5jaWEgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICAgIC8qIDEuIENvbXByb2JhciBzaSBlbCBlbGVtZW50byBuYXYgdGllbmUgbGEgY2xhc2UgJ25hdi0tYWN0aXZvJy5cclxuICAgICAgIDIuIENvbXByb2JhciBzaSBlbCBlbGVtZW50byBwYWRyZSBkZWwgZWxlbWVudG8gZW4gZWwgcXVlIHNlIGhpem8gY2xpYyBubyBlcyBpZ3VhbCBhbCBlbGVtZW50byBjb24gbGEgY2xhc2UgJ2hhbWJ1cmd1ZXInLlxyXG4gICAgICAgU2kgdG9kYXMgbGFzIGNvbmRpY2lvbmVzIHNlIGN1bXBsZW4sIGFsdGVybmFyIGxhIHByZXNlbmNpYSBkZSBsYSBjbGFzZSAnbmF2LS1hY3Rpdm8nIGVuIGVsIGVsZW1lbnRvICduYXYnLlxyXG4gICAgKi9cclxuICAgIGlmIChuYXYuY2xhc3NMaXN0LmNvbnRhaW5zKGBuYXYtLWFjdGl2b2ApICYmIHJlZmVyZW5jaWEgIT09IGhhbWJ1cmd1ZXIpIHtcclxuICAgICAgbmF2LmNsYXNzTGlzdC5yZW1vdmUoYG5hdi0tYWN0aXZvYCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXIoZSkge1xyXG4gIGNvbnN0IGVtcHR5ID0gYGA7XHJcbiAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuICBjb25zdCByZWZlcmVuY2UgPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG4gIGNvbnN0IGZpZWxkTmFtZSA9IGlucHV0Lm5hbWU7XHJcbiAgY29uc3QgZmllbGRWYWx1ZSA9IGlucHV0LnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAvLyBBbGVydGEgc2kgdW4gZmllbGQgZXN0w6EgdmFjaW9cclxuICBpZiAoZmllbGRWYWx1ZSA9PT0gZW1wdHkgJiYgZmllbGROYW1lICE9PSBgZW1haWxOZXdzYCkge1xyXG4gICAgc2hvd0FsZXJ0KGBFbCAke2ZpZWxkTmFtZX0gZXMgb2JsaWdhdG9yaW9gLCByZWZlcmVuY2UpO1xyXG4gICAgZW1haWxbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbCgpO1xyXG5cclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgZWwgZW1haWxcclxuICBpZiAoZmllbGROYW1lID09PSBgZW1haWxgICYmICFpc1ZhbGlkRW1haWwoZmllbGRWYWx1ZSkpIHtcclxuICAgIHNob3dBbGVydChgRWwgZW1haWwgZXMgaW52w6FsaWRvYCwgcmVmZXJlbmNlKTtcclxuICAgIGVtYWlsW2ZpZWxkTmFtZV0gPSBgYDtcclxuICAgIGNoZWNrRW1haWwoKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIGVsIHRlbGVmb25vXHJcbiAgaWYgKGZpZWxkTmFtZSA9PT0gYHRlbGVmb25vYCAmJiAhaXNWYWxpZFRlbChmaWVsZFZhbHVlKSkge1xyXG4gICAgc2hvd0FsZXJ0KGBFbCB0ZWzDqWZvbm8gZXMgaW52w6FsaWRvYCwgcmVmZXJlbmNlKTtcclxuICAgIGVtYWlsW2ZpZWxkTmFtZV0gPSBgYDtcclxuICAgIGNoZWNrRW1haWwoKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAoZmllbGROYW1lID09PSBgZW1haWxOZXdzYCAmJiAhaXNWYWxpZEVtYWlsKGZpZWxkVmFsdWUpKSB7XHJcbiAgICBzaG93QWxlcnQoYEVsIGVtYWlsIGVzIGludmFsaWRvYCwgcmVmZXJlbmNlKTtcclxuICAgIGRlbGV0ZSBlbWFpbC5lbWFpbE5ld3M7XHJcbiAgICBlbWFpbE5ld3NsZXR0ZXJbZmllbGROYW1lXSA9IGBgO1xyXG4gICAgY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjbGVhbkFsZXJ0KHJlZmVyZW5jZSk7XHJcblxyXG4gIC8vIExsZW5hciBsb3Mgb2JqZXRvcyBgRW1haWxgIHkgYEVtYWlsTmV3c2xldHRlcmBcclxuICBpZiAocmVmZXJlbmNlLnBhcmVudEVsZW1lbnQgPT09IGZvcm1IZWFkZXIpIHtcclxuICAgIGVtYWlsW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgaWYgKHJlZmVyZW5jZS5wYXJlbnRFbGVtZW50ID09PSBmb3JtTmV3c2xldHRlcikge1xyXG4gICAgZW1haWxOZXdzbGV0dGVyW2ZpZWxkTmFtZV0gPSBmaWVsZFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV2aXNhciBsb3Mgb2JqZXRvcyBgRW1haWxgIHkgYEVtYWlsTmV3c2xldHRlcmBcclxuICBjaGVja0VtYWlsKCk7XHJcbiAgY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0FsZXJ0KG1lbnNhamUsIHJlZmVyZW5jZSkge1xyXG4gIGNsZWFuQWxlcnQocmVmZXJlbmNlKTtcclxuXHJcbiAgLy8gR2VuZXJhciBsYXMgYWxlcnRhc1xyXG4gIGNvbnN0IGVycm9yID0gcmVmZXJlbmNlLnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19maWVsZGApO1xyXG5cclxuICBlcnJvci5jbGFzc0xpc3QuYWRkKGBmb3JtX19maWVsZC0tZXJyb3JgKTtcclxuICBlcnJvci5wbGFjZWhvbGRlciA9IG1lbnNhamU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFuQWxlcnQocmVmZXJlbmNlKSB7XHJcbiAgLy8gQ29tcHJvYmFyIHNpIGV4aXN0ZSBsYSBhbGVydGFcclxuICBjb25zdCBpc0FjdGl2ZUFsZXJ0ID0gcmVmZXJlbmNlLnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19maWVsZC0tZXJyb3JgKTtcclxuXHJcbiAgaWYgKGlzQWN0aXZlQWxlcnQpIHtcclxuICAgIGlzQWN0aXZlQWxlcnQuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fZmllbGQtLWVycm9yYCk7XHJcbiAgICBpc0FjdGl2ZUFsZXJ0LnBsYWNlaG9sZGVyID0gYEluZ3Jlc2EgdHUgJHtpc0FjdGl2ZUFsZXJ0Lm5hbWV9YDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWRFbWFpbChlbWFpbCkge1xyXG4gIGNvbnN0IHJlZ2V4RW1haWwgPSAvXlxcdysoWy4tXytdP1xcdyspKkBcXHcrKFsuLV0/XFx3KykqKFxcLlxcd3syLDEwfSkrJC87XHJcbiAgY29uc3QgcmVzdWx0RW1haWwgPSByZWdleEVtYWlsLnRlc3QoZW1haWwpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0RW1haWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWRUZWwodGVsKSB7XHJcbiAgY29uc3QgcmVnZXhUZWwgPSAvXihcXCs1MnwwMDUyfDUyKT9bIC1dKlsgLV0qKFswLTldWyAtXSopezEwfS87XHJcbiAgY29uc3QgcmVzdWx0VGVsID0gcmVnZXhUZWwudGVzdCh0ZWwpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0VGVsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0VtYWlsKCkge1xyXG4gIGNvbnN0IGJ0blN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidG5TdWJtaXRgKTtcclxuXHJcbiAgaWYgKE9iamVjdC52YWx1ZXMoZW1haWwpLmluY2x1ZGVzKGBgKSkge1xyXG4gICAgYnRuU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBidG5TdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKSB7XHJcbiAgY29uc3QgYnRuU3Vic2NyaWJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J0blN1YnNjcmliZWApO1xyXG5cclxuICBpZiAoT2JqZWN0LnZhbHVlcyhlbWFpbE5ld3NsZXR0ZXIpLmluY2x1ZGVzKGBgKSkge1xyXG4gICAgYnRuU3Vic2NyaWJlLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGJ0blN1YnNjcmliZS5kaXNhYmxlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZW5kRW1haWwoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuXHJcbiAgaWYgKGlucHV0ID09PSBmb3JtSGVhZGVyKSB7XHJcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3NwaW5uZXJgKTtcclxuXHJcbiAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXItLWFjdGl2b2ApO1xyXG4gICAgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKGBmb3JtX19zcGlubmVyYCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lci0tYWN0aXZvYCk7XHJcbiAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZChgZm9ybV9fc3Bpbm5lcmApO1xyXG5cclxuICAgICAgLy8gUmVpbmljaWFyIGVsIGZvcm11bGFyaW9cclxuICAgICAgcmVzZXRGb3JtKCk7XHJcblxyXG4gICAgICAvLyBDcmVhciBhbGVydGEgZGUgZXhpdG9cclxuICAgICAgY29uc3QgYWxlcnRhRXhpdG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBQYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLmNsYXNzTGlzdC5hZGQoYGZvcm1fX2V4aXRvYCk7XHJcbiAgICAgIGFsZXJ0YUV4aXRvLnRleHRDb250ZW50ID0gXCJNZW5zYWplIGVudsOtYWRvIGV4aXRvc2FtZW50ZVwiO1xyXG5cclxuICAgICAgZm9ybUhlYWRlci5hcHBlbmRDaGlsZChhbGVydGFFeGl0byk7XHJcblxyXG4gICAgICAvLyBFbGltaW5hciBsYSBhbGVydGEgZGVzcHVlcyBkZSBtb3N0cmFybGFcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWxlcnRhRXhpdG8ucmVtb3ZlKCk7XHJcbiAgICAgIH0sIDIwMDApO1xyXG4gICAgfSwgMzAwMCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaWYgKGlucHV0ID09PSBmb3JtTmV3c2xldHRlcikge1xyXG4gICAgY29uc3Qgc3Bpbm5lck5ld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjc3Bpbm5lck5ld3NgKTtcclxuXHJcbiAgICBzcGlubmVyTmV3cy5jbGFzc0xpc3QuYWRkKGBmb3JtX19zcGlubmVyLS1hY3Rpdm9gKTtcclxuICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5yZW1vdmUoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgc3Bpbm5lck5ld3MuY2xhc3NMaXN0LnJlbW92ZShgZm9ybV9fc3Bpbm5lci0tYWN0aXZvYCk7XHJcbiAgICAgIHNwaW5uZXJOZXdzLmNsYXNzTGlzdC5hZGQoYGZvcm1fX3NwaW5uZXJgKTtcclxuXHJcbiAgICAgIC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIHJlc2V0Rm9ybSgpO1xyXG5cclxuICAgICAgLy8gQ3JlYXIgYWxlcnRhIGRlIGV4aXRvXHJcbiAgICAgIGNvbnN0IGFsZXJ0YUV4aXRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgUGApO1xyXG4gICAgICBhbGVydGFFeGl0by5jbGFzc0xpc3QuYWRkKGBmb3JtX19leGl0b2ApO1xyXG4gICAgICBhbGVydGFFeGl0by5jbGFzc0xpc3QuYWRkKGBmb3JtX19leGl0by0tbmV3c2xldHRlcmApO1xyXG4gICAgICBhbGVydGFFeGl0by50ZXh0Q29udGVudCA9IGBHcmFjaWFzIHBvciBzdXNjcmliaXJ0ZWA7XHJcblxyXG4gICAgICBmb3JtTmV3c2xldHRlci5hcHBlbmRDaGlsZChhbGVydGFFeGl0byk7XHJcblxyXG4gICAgICAvLyBFbGltaW5hciBsYSBhbGVydGEgZGVzcHVlcyBkZSBtb3N0cmFybGFcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgYWxlcnRhRXhpdG8ucmVtb3ZlKCk7XHJcbiAgICAgIH0sIDIwMDApO1xyXG4gICAgfSwgMzAwMCk7XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gIC8vIFJlaW5pY2lhciBsb3Mgb2JqZXRvc1xyXG4gIGVtYWlsLm5vbWJyZSA9IGBgO1xyXG4gIGVtYWlsLmVtYWlsID0gYGA7XHJcbiAgZW1haWwudGVsZWZvbm8gPSBgYDtcclxuXHJcbiAgZW1haWxOZXdzbGV0dGVyLmVtYWlsTmV3cyA9IGBgO1xyXG5cclxuICAvLyBSZWluaWNpYXIgbG9zIGZvcm11bGFyaW9zXHJcbiAgZm9ybUhlYWRlci5yZXNldCgpO1xyXG4gIGZvcm1OZXdzbGV0dGVyLnJlc2V0KCk7XHJcblxyXG4gIC8vIENvbXByb2JhciBlbCBgRW1haWxgIGUgYEVtYWlsTmV3c2BcclxuICBjaGVja0VtYWlsKCk7XHJcbiAgY2hlY2tFbWFpbE5ld3NsZXR0ZXIoKTtcclxufVxyXG4iXX0=
